##C.05.01.如何诊断是什么造成的问题 

当你碰到一个问题时，首先要做的事情就是找出那个程序或者哪台设备引起的这个问题：  

* 如果你遇到的问题有下述的某一个症状，这可能是一个硬件问题（例如内存、主板、CPU或者磁盘）或者内核问题：   
	* 键盘失灵。最常用的检查办法就是按Caps Lock键。如果你的Caps Lock灯没有变化，此时就不得不更换键盘了。（更换键盘之前，你应该尝试重启你的电脑，并检查键盘的电缆是否连接正常）  
	* 鼠标指针无法移动。  
	* 机器未对远程机器的Ping命令做出应答。  
	* 与MySQL无关的其他程序工作不正常。
	* 系统意外重启（一个有问题的用户程序不应该能够导致系统关闭。）

在该情况下，应检查所有的电缆并运行某些诊断工具，对你的硬件进行检查！此外，还应检查是否有能够解决问题的、适用于你的操作系统的补丁、更新或服务包。请检查所有的库（如glibc）是否是最新的。

使用配备ECC内存的机器总是好的，因为这可以尽早发现内存问题。

* 如果键盘已锁定，可从另一台机器登录到你的机器，并执行kbd_mode –a，或许能恢复。

* 为了找出问题的原因，请检查系统的日志文件（/var/log/messages或类似文件）。如果你认为问题出在MySQL中，应检查MySQL的日志文件。请参见章节[5.2，“MySQL日志”][05.02.00]

* 如果你认为硬件没有问题，应尝试找出导致问题的原因。请使用**top**、**ps**、任务管理器或类似程序，以检查哪个程序占用了所有CPU时间或锁定了机器。

* 使用**top**、**df**或类似程序检查是否内存不够、磁盘空间不足、文件描述符缺乏、或其他关键资源缺少。

* 如果问题是失去控制的进程，应尝试杀死它。如果杀不死进程，或许是因为操作系统中存在缺陷。

如果在检查了所有其他可能性之后，并得出结论问题是由MySQL服务器或MySQL客户端导致的，应创建提供给我方的邮件列表或支持团队的缺陷报告。在缺陷报告中，请详细描述系统的行为，以及你认为发生了什么情况。还应阐明为什么你认为是MySQL导致了问题。请考虑本章介绍的所有情况。准确阐明当你检查系统时问题是如何出现的。对于程序和日志文件的任何输出和错误消息，请使用“复制和粘贴”方法。
尽量详细描述不工作的程序，以及你所见到的所有征兆。我们过去收到过很多仅说明“系统不工作”的缺陷报告。这不会为我们提供有助于解决问题的信息。
如果程序失败，了解下述信息总是有用的：

* 有问题的程序已经出现了分段错误（是否转储内核）？

* 程序是否占用了所有可用的CPU时间？用**top**进行检查。让程序运行一段时间，或许能简单地评估某些事是否是计算密集性的。

* 如果问题是因[mysqld][]服务器导致的，使用[mysqladmin -u root ping][mysqladmin]或[mysqladmin -u root processlist][mysqladmin]是否能获得服务器的响应？

* 当你尝试连接到MySQL服务器（例如，[mysql][]）时，客户端程序给出的信息是什么？客户端是否堵塞？是否获得了来自程序的任何输出？

当发送缺陷报告时，请参见章节[1.7，如何报告缺陷和问题][01.07.00]中给出的说明。

[05.02.00]:../Chapter_05/05.02.00_MySQL_Server_Logs.md
[mysqld]:../Chapter_04/04.03.01_mysqld_The_MySQL_Server.md
[mysqladmin]:../Chapter_04/04.05.02_mysqladmin_Client_for_Administering_a_MySQL_Server.md
[mysql]:../Chapter_04/04.05.01_mysql_The_MySQL_Command-Line_Tool.md
[01.07.00]:../Chapter_01/01.07.00_How_to_Report_Bugs_or_Problems.md